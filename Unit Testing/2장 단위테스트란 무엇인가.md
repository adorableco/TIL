단위테스트는 좋은 부정 지표이지만 나쁜 긍정지표이다

- **공유 의존성** : 테스트 간에 공유되고 서로의 결과에 영향을 미칠 수 있는 수단을 제공하는 의존성
- **비공개 의존성** : 공유하지 않는 의존성
- **프로세스 외부 의존성** : 애플리케이션 실행 프로세스 외부에서 실행되는 의존성

  ➡️ 아직 메모리에 없는 데이터에 대한 프록시

  ➡️ **프로세스 외부 의존성은 대부분 공유 의존성에 해당** but  모두 그런 것은 X

- **휘발성 의존성** : 개발자 머신에 기본 설치된 환경 외에 런타임 환경의 설정 및 구성을 요구함 or 비결정적 동작을 포함함 (e.g. 난수 생성기 또는 현재 날짜와 시간을 반환하는 클래스)

---

### 단위 테스트의 정의

- 작은 코드 조각을 검증하고
- 빠르게 수행하고
- 격리된 방식으로 처리함

<aside>
💡 테스트는 코드의 단위가 아니라 동작의 단위를 검증해야 한다!
테스트가 단일 동작 단위를 검증하는 한 좋은 테스트이다.

</aside>

---

### 런던파와 고전파

- 단위 테스트의 정의 중 `격리 방식` 을 어떻게 바라보는가에 대한 차이

|  | **격리 주체** | **단위의 크기** | **테스트 대역 사용 대상** | **테스트 방식** |
| --- | --- | --- | --- | --- |
| **런던파 (mockist)** | 단위 | 단일 클래스 | 불변 의존성 외 모든 의존성 | 하향식 테스트 |
| **고전파 (Detroit)** | 단위 테스트 | 단일 클래스 or 클래스 세트 | 공유 의존성 | 상향식 테스트 |
- **협력자 (collaborator)** : 공유하거나 변경 가능한 의존성
    - e.g) 데이터베이스 접근 권한을 제공하는 클래스
    - 숫자 5 같은 경우는 **의존성이지만 협력자는 아님** (변경 불가) ➡️ 값 또는 값 객체로 분류됨

---

### 통합 테스트의 정의

- 단위 테스트의 정의를 하나 이상 충족하지 않는 테스트
    - **공유 의존성에 접근**하는 테스트
    - **프로세스 외부 의존성에 접근**해서 테스트가 느려지는 경우
    - **둘 이상의 동작 단위를 검증**하는 경우
        - 다른 동작 단위를 검증하는 느린 테스트가 두 개 있을 때, 하나로 합치는 것이 타당할 수 있음

**엔드 투 엔드 테스트란?**

- 통합 테스트의 일부
- 엔드 투 엔드 테스트가 일반적으로 의존성을 더 많이 포함
- UI 테스트, GUI 테스트, 기능 테스트와 같은 같은 말
- 유지 보수 측면에서 가장 비용이 많이 들기 때문에 모든 테스트를 통과한 후에 **빌드 프로세스 후반에 실행하는 것이 좋음**
- e.g) 통합테스트에는 결제 게이트웨이는 테스트 대역으로 사용하지만 엔드 투 엔드 테스트에서는 대역 사용 X